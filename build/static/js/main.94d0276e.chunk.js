(this.webpackJsonptask_for_idecisiongames=this.webpackJsonptask_for_idecisiongames||[]).push([[0],{133:function(e,t,n){e.exports=n(215)},215:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(5),o=n(35),i=n(36),s=n(14),u=n.n(s),l=n(37),p=n(70),m=n(120),h=n.n(m),f=function(){return window.history.replaceState({},document.title,window.location.pathname)},d=r.a.createContext(),g=function(){return Object(a.useContext)(d)},k=n(57),v=n(100),b=n(48),E=n.n(b),j=function(){var e=g(),t=e.isAuthenticated,n=e.loginWithRedirect,a=e.logout;return r.a.createElement("div",null,!t&&r.a.createElement(v.a,{onClick:function(){n({})}},"Log in"),t&&r.a.createElement(v.a,{onClick:function(){localStorage.clear(),a()}},"Log out"),t&&r.a.createElement("span",null,r.a.createElement(k.a,{className:E.a.navbar,to:"/home"},"Home"),"\xa0",r.a.createElement(k.a,{to:"/favourite"},"Favourite")))},O=n(218),w=n(219),x=n(217),y=n(223),S=function(e){var t=e.handleClick,n=e.pokemons;return r.a.createElement(O.a,{grid:{gutter:10,xs:1,sm:2,md:3,lg:3,xl:4,xxl:4},itemLayout:"vertical",size:"large",pagination:{position:"both",showSizeChanger:!0,defaultCurrent:1,total:1200},dataSource:n,renderItem:function(e){return r.a.createElement(C,{item:e,handleClick:t})}})},C=function(e){var t=e.item,n=e.handleClick,a=g().user;return r.a.createElement(O.a.Item,null,r.a.createElement(w.a,{title:t.name,extra:r.a.createElement("div",null,r.a.createElement(x.a,{src:t.avatar}),r.a.createElement(v.a,{onClick:function(){return n(t,a.email)},shape:"circle",icon:"star"})),style:{width:300,margin:"auto"}},r.a.createElement("p",null," weight: ",t.weight),r.a.createElement("p",null," height: ",t.height),r.a.createElement(y.a,{color:"#f50"},"type: ",t.types)))},_="http://localhost:3003/api/",P=Object(o.b)("pokemonStore")(Object(o.c)((function(e){var t=e.pokemonStore,n=t.getFavouritePokemons,c=t.pokemons,o=t.deleteFavourite,i=g().user;return localStorage.getItem("token")&&Object(a.useEffect)((function(){n(i.email)}),[n,c,i.email]),r.a.createElement(S,{pokemons:c,handleClick:o})}))),T=n(220),F=n(52),I=y.a.CheckableTag,R=["fire","fighting","psychic","poison","flying","water"],W=function(e){var t=Object(a.useState)(!0),n=Object(l.a)(t,2),c=n[0],o=n[1],i=e.search,s=e.type,u=Object(F.a)({},e);return delete u.search,r.a.createElement(I,Object.assign({},u,{checked:c,onChange:function(){o(!c),c?i(s):i()}}))},H=function(e){var t=e.search;return R.map((function(e,n){return r.a.createElement(W,{key:n,search:t,type:e},e)}))},U=T.a.Search,A=Object(o.b)("pokemonStore")(Object(o.c)((function(e){var t=e.pokemonStore,n=t.getPokemons,c=t.setFavourite,o=t.pokemons,i=t.sortedPokemons,s=t.search,l=g().getTokenSilently,p=i.length?i:o;return Object(a.useEffect)((function(){!function(){var e;u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(l());case 2:return e=t.sent,localStorage.setItem("token",e),t.abrupt("return");case 5:case"end":return t.stop()}}))}()}),[l]),Object(a.useEffect)((function(){n()}),[n]),r.a.createElement("div",null,r.a.createElement("div",{className:E.a.filter},r.a.createElement(H,{search:s}),r.a.createElement(U,{style:{width:350},onSearch:function(e){return s(e,"name")},enterButton:!0})),r.a.createElement(S,{search:s,pokemons:p,handleClick:c}))}))),L=n(222),N=n(21),J=Object(N.a)(),z=function(){return r.a.createElement(L.a,{status:"404",title:"404",subTitle:"unknown route!!!",extra:r.a.createElement(v.a,{type:"primary",onClick:function(){J.push("/")}},"back to main")})},B=function(e){var t=e.component,n=e.path,c=Object(p.a)(e,["component","path"]),o=g(),s=o.loading,l=o.isAuthenticated,m=o.loginWithRedirect;Object(a.useEffect)((function(){if(!s&&!l){u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.awrap(m({appState:{targetUrl:n}}));case 2:case"end":return e.stop()}}))}}),[s,l,m,n]);return r.a.createElement(i.a,Object.assign({path:n,render:function(e){return!0===l?r.a.createElement(t,e):null}},c))},D=n(76),K=n(130),Y=n(10),q=function e(){var t=this;Object(K.a)(this,e),this.pokemons=[],this.sortedPokemons=[],this.getPokemons=function(){var e,n;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,u.a.awrap(fetch(_+"pokemons",t.getHeader()));case 3:return e=a.sent,a.next=6,u.a.awrap(e.json());case 6:n=a.sent,Object(Y.n)((function(){t.pokemons=n})),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),Object(Y.n)((function(){t.pokemons=[]}));case 13:case"end":return a.stop()}}),null,null,[[0,10]])},this.search=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{Object(Y.n)((function(){t.sortedPokemons=e?t.pokemons.filter((function(t){return"name"===n?t.name===e:t.types===e})):t.pokemons}))}catch(a){Object(Y.n)((function(){t.pokemons=[]}))}},this.setFavourite=function(e,n){try{fetch(_+"favourite",Object(F.a)({method:"PUT"},t.getHeader(),{body:JSON.stringify({favourite:e,email:n})}))}catch(a){t.pokemons=[]}},this.deleteFavourite=function(e,n){try{fetch(_+"favourite"+e._id,Object(F.a)({method:"DELETE"},t.getHeader()))}catch(a){t.pokemons=[]}},this.getFavouritePokemons=function(e){var n,a;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,u.a.awrap(fetch(_+"favouritePokemons",Object(F.a)({},t.getHeader(e))));case 3:return n=r.sent,r.next=6,u.a.awrap(n.json());case 6:a=r.sent,Object(Y.n)((function(){t.pokemons=a})),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),Object(Y.n)((function(){t.pokemons=[]}));case 13:case"end":return r.stop()}}),null,null,[[0,10]])},this.getHeader=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-type":"application/json",userData:e}}}};Object(Y.h)(q,{pokemons:Y.m,sortedPokemons:Y.m,getAllTodo:Y.d,search:Y.d,setFavorite:Y.d,getFavouritePokemons:Y.d});var G={pokemonStore:new q},M=(n(214),n(221));Object(c.render)(r.a.createElement(M.a,{className:E.a.root},r.a.createElement((function(e){var t=e.children,n=e.onRedirectCallback,c=void 0===n?f:n,o=Object(p.a)(e,["children","onRedirectCallback"]),i=Object(a.useState)(),s=Object(l.a)(i,2),m=s[0],g=s[1],k=Object(a.useState)(),v=Object(l.a)(k,2),b=v[0],E=v[1],j=Object(a.useState)(),O=Object(l.a)(j,2),w=O[0],x=O[1],y=Object(a.useState)(!0),S=Object(l.a)(y,2),C=S[0],_=S[1],P=Object(a.useState)(!1),T=Object(l.a)(P,2),F=T[0],I=T[1];Object(a.useEffect)((function(){!function(){var e,t,n,a,r;u.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,u.a.awrap(h()(o));case 2:if(e=i.sent,x(e),!window.location.search.includes("code=")){i.next=10;break}return i.next=7,u.a.awrap(e.handleRedirectCallback());case 7:t=i.sent,n=t.appState,c(n);case 10:return i.next=12,u.a.awrap(e.isAuthenticated());case 12:if(a=i.sent,g(a),!a){i.next=19;break}return i.next=17,u.a.awrap(e.getUser());case 17:r=i.sent,E(r);case 19:_(!1);case 20:case"end":return i.stop()}}))}()}),[]);return r.a.createElement(d.Provider,{value:{isAuthenticated:m,user:b,loading:C,popupOpen:F,loginWithPopup:function(){var e,t,n=arguments;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:{},I(!0),a.prev=2,a.next=5,u.a.awrap(w.loginWithPopup(e));case 5:a.next=10;break;case 7:a.prev=7,a.t0=a.catch(2),console.error(a.t0);case 10:return a.prev=10,I(!1),a.finish(10);case 13:return a.next=15,u.a.awrap(w.getUser());case 15:t=a.sent,E(t),g(!0);case 18:case"end":return a.stop()}}),null,null,[[2,7,10,13]])},handleRedirectCallback:function(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return _(!0),t.next=3,u.a.awrap(w.handleRedirectCallback());case 3:return t.next=5,u.a.awrap(w.getUser());case 5:e=t.sent,_(!1),g(!0),E(e);case 9:case"end":return t.stop()}}))},getIdTokenClaims:function(){return w.getIdTokenClaims.apply(w,arguments)},loginWithRedirect:function(){return w.loginWithRedirect.apply(w,arguments)},getTokenSilently:function(){return w.getTokenSilently.apply(w,arguments)},getTokenWithPopup:function(){return w.getTokenWithPopup.apply(w,arguments)},logout:function(){return w.logout.apply(w,arguments)}}},t)}),{domain:D.domain,client_id:D.clientId,audience:D.audience,redirect_uri:window.location.origin,onRedirectCallback:function(e){J.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)}},r.a.createElement(o.a,G,r.a.createElement((function(){return r.a.createElement(i.b,{history:J},r.a.createElement("header",null,r.a.createElement(j,null)),r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",exact:!0}),r.a.createElement(B,{path:"/home",component:A}),r.a.createElement(B,{path:"/favourite",component:P}),r.a.createElement(i.a,{component:z})))}),null)))),document.getElementById("root"))},48:function(e,t,n){e.exports={root:"src_root__1Njmj",navbar:"src_navbar___g_v2",filter:"src_filter__2SJuF"}},76:function(e){e.exports=JSON.parse('{"domain":"dev-9diiqyip.auth0.com","clientId":"0265SBYeu2oGSOHvjl5LcjYKPzxadaKL","audience":"http://localhost:3002/"}')}},[[133,1,2]]]);
//# sourceMappingURL=main.94d0276e.chunk.js.map